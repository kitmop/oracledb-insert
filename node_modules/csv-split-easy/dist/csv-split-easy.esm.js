/**
 * @name csv-split-easy
 * @fileoverview Splits the CSV string into array of arrays, each representing a row of columns
 * @version 6.0.20
 * @author Roy Revelt, Codsen Ltd
 * @license MIT
 * {@link https://codsen.com/os/csv-split-easy/}
 */

import{remSep as c}from"string-remove-thousand-separators";var d="6.0.20";var v=d,h={removeThousandSeparatorsFromNumbers:!0,padSingleDecimalPlaceNumbers:!0,forceUKStyle:!1};function N(r,p){let i=0,n=0,a=[],m=[],o=!1,l=!0;if(p&&typeof p!="object")throw new Error(`csv-split-easy/split(): [THROW_ID_02] Options object must be a plain object! Currently it's of a type ${typeof p} equal to:
${JSON.stringify(p,null,4)}`);let s={...h,...p};if(typeof r!="string")throw new TypeError(`csv-split-easy/split(): [THROW_ID_04] input must be string! Currently it's: ${typeof r}, equal to: ${JSON.stringify(r,null,4)}`);if(r==="")return[[""]];r=r.trim();for(let e=0,u=r.length;e<u;e++){if(l&&r[e]!=='"'&&r[e]!==","&&r[e].trim()!==""&&(l=!1),r[e]==='"')if(o&&r[e+1]==='"')e+=1;else if(o){o=!1;let t=r.slice(i,e);t.trim()!==""&&(l=!1);let f=/""/.test(t)?t.replace(/""/g,'"'):c(t,{removeThousandSeparatorsFromNumbers:s.removeThousandSeparatorsFromNumbers,padSingleDecimalPlaceNumbers:s.padSingleDecimalPlaceNumbers,forceUKStyle:s.forceUKStyle});a.push(f)}else o=!0,i=e+1;else if(!o&&r[e]===","){if(r[e-1]!=='"'&&!o){let t=r.slice(i,e);t.trim()!==""&&(l=!1),a.push(c(t,{removeThousandSeparatorsFromNumbers:s.removeThousandSeparatorsFromNumbers,padSingleDecimalPlaceNumbers:s.padSingleDecimalPlaceNumbers,forceUKStyle:s.forceUKStyle}))}i=e+1,n&&(n=0)}else if(r[e]===`
`||r[e]==="\r"){if(!n){if(n=e,!o&&r[e-1]!=='"'){let t=r.slice(i,e);t.trim()!==""&&(l=!1),a.push(c(t,{removeThousandSeparatorsFromNumbers:s.removeThousandSeparatorsFromNumbers,padSingleDecimalPlaceNumbers:s.padSingleDecimalPlaceNumbers,forceUKStyle:s.forceUKStyle}))}l?a.length=0:m.push(a),l=!0,a=[]}i=e+1}else n&&(n=0,i=e);if(e+1===u){if(r[e]!=='"'){let t=r.slice(i,e+1);t.trim()&&(l=!1),a.push(c(t,{removeThousandSeparatorsFromNumbers:s.removeThousandSeparatorsFromNumbers,padSingleDecimalPlaceNumbers:s.padSingleDecimalPlaceNumbers,forceUKStyle:s.forceUKStyle}))}l?a=[]:m.push(a),l=!0}}return m.length===0?[[""]]:m}export{h as defaults,N as splitEasy,v as version};
